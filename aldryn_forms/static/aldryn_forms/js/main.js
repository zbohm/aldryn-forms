(()=>{"use strict";function e(e,t){for(const[r,s]of Object.entries(t)){const t=new RegExp(`%\\(${r}\\)s`,"g");e=e.replace(t,s)}return e}function t(e){const t=e.target.closest("form");if(t){for(const e of t.querySelectorAll(".aldryn-forms-required-msg, .aldryn-forms-submit-msg"))e.parentNode.removeChild(e);for(const e of t.querySelectorAll("[type=submit]"))e.disabled=!1,e.readOnly=!1}}function r(t){t.target.blur();for(const e of this.querySelectorAll("[type=submit]"))e.disabled=!0,e.readOnly=!0;let r=!0;for(const t of this.getElementsByClassName("form-required")){const s=t.querySelectorAll("input[type=checkbox]:checked").length;s<parseInt(t.dataset.required_min)&&(r=!1,t.insertAdjacentHTML("afterend",'<div class="text-danger aldryn-forms aldryn-forms-required-msg">'+e(gettext("You have to choose at least %(value)s options (chosen %(chosen)s)."),{value:t.dataset.required_min,chosen:s})+"</div>"))}if(r)for(const e of this.querySelectorAll("[type=submit]"))e.insertAdjacentHTML("afterend",'<div class="text-danger aldryn-forms aldryn-forms-submit-msg">'+gettext("Please wait. Submitting form...")+"</div>");else{t.preventDefault();for(const e of this.querySelectorAll("[type=submit]"))e.insertAdjacentHTML("afterend",'<div class="text-danger aldryn-forms aldryn-forms-submit-msg">'+gettext("Correct the errors first, please.")+"</div>")}}"function"!=typeof gettext&&(window.gettext=e=>e),document.addEventListener("DOMContentLoaded",(()=>{for(const e of document.getElementsByTagName("form"))e.classList.contains("skip-disable-submit")||e.addEventListener("submit",r);for(const e of document.querySelectorAll(".form-required input[type=checkbox]"))e.addEventListener("click",t)}))})();
//# sourceMappingURL=main.js.map