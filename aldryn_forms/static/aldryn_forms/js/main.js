(()=>{"use strict";function e(e,t){for(const[s,r]of Object.entries(t)){const t=new RegExp(`%\\(${s}\\)s`,"g");e=e.replace(t,r)}return e}function t(e){const t=e.target.closest("form");if(t){for(const e of t.querySelectorAll(".aldryn-forms-required-msg, .aldryn-forms-submit-msg"))e.parentNode.removeChild(e);for(const e of t.querySelectorAll("[type=submit]"))e.disabled=!1,e.readOnly=!1}}function s(e,t){e.target.blur();for(const s of e.target.querySelectorAll("[type=submit]"))s.disabled=!0,s.readOnly=!0,t&&s.insertAdjacentHTML("afterend",'<div class="text-danger aldryn-forms aldryn-forms-submit-msg">'+gettext("Please wait. Submitting form...")+"</div>")}function r(t){let s=!0;for(const t of this.getElementsByClassName("form-required")){const r=t.querySelectorAll("input[type=checkbox]:checked").length;r<parseInt(t.dataset.required_min)&&(s=!1,t.insertAdjacentHTML("afterend",'<div class="text-danger aldryn-forms aldryn-forms-required-msg">'+e(gettext("You have to choose at least %(value)s options (chosen %(chosen)s)."),{value:t.dataset.required_min,chosen:r})+"</div>"))}if(s)for(const e of this.querySelectorAll("[type=submit]"))e.insertAdjacentHTML("afterend",'<div class="text-danger aldryn-forms aldryn-forms-submit-msg">'+gettext("Please wait. Submitting form...")+"</div>");else{t.preventDefault();for(const e of this.querySelectorAll("[type=submit]"))e.insertAdjacentHTML("afterend",'<div class="text-danger aldryn-forms aldryn-forms-submit-msg">'+gettext("Correct the errors first, please.")+"</div>")}}"function"!=typeof gettext&&(window.gettext=e=>e),document.addEventListener("DOMContentLoaded",(()=>{for(const e of document.getElementsByTagName("form"))if(e.getAttribute("novalidate"))e.classList.contains("skip-disable-submit")||e.addEventListener("submit",(e=>s(e,!0)));else{e.classList.contains("skip-disable-submit")||e.addEventListener("submit",(e=>s(e,!1))),e.addEventListener("submit",r);for(const s of e.querySelectorAll(".form-required input[type=checkbox]"))s.addEventListener("click",t)}}))})();
//# sourceMappingURL=main.js.map